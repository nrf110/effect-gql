---
title: CLI API Reference
description: Programmatic API for @effect-gql/cli
---

The `@effect-gql/cli` package exports functions for programmatic use in custom scripts and tooling.

For installation and command-line usage, see the [CLI Guide](/effect-gql/guides/cli/).

## Functions

### generateSDL

Generate SDL from a GraphQL schema.

```typescript
import { generateSDL } from "@effect-gql/cli"

const sdl = generateSDL(schema)

// With options
const sortedSdl = generateSDL(schema, { sort: true })
```

#### Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `schema` | `GraphQLSchema` | The GraphQL schema |
| `options.sort` | `boolean` | Sort types alphabetically (default: `true`) |

#### Returns

`string` - The SDL representation of the schema.

---

### generateSDLFromModule

Load a schema from a module and generate SDL.

```typescript
import { generateSDLFromModule } from "@effect-gql/cli"
import { Effect } from "effect"

const sdl = await Effect.runPromise(
  generateSDLFromModule("./src/schema.ts")
)

// With options
const sdl = await Effect.runPromise(
  generateSDLFromModule("./src/schema.ts", { sort: false })
)
```

#### Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `modulePath` | `string` | Path to the module (relative to cwd) |
| `options.sort` | `boolean` | Sort types alphabetically (default: `true`) |

#### Returns

`Effect.Effect<string, Error>` - Effect that produces SDL or fails with an error.

---

### loadSchema

Load a GraphQL schema from a module path.

```typescript
import { loadSchema } from "@effect-gql/cli"
import { Effect } from "effect"

const schema = await Effect.runPromise(
  loadSchema("./src/schema.ts")
)
```

#### Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `modulePath` | `string` | Path to the module (relative to cwd) |

#### Returns

`Effect.Effect<GraphQLSchema, Error>` - Effect that produces the loaded schema or fails with an error.

#### Module Resolution

The module should export one of:

- `builder` - A `GraphQLSchemaBuilder` instance (calls `buildSchema()` automatically)
- `schema` - A `GraphQLSchema` instance
- `default` - Either of the above as the default export

```typescript
// Any of these work:
export const builder = GraphQLSchemaBuilder.empty.pipe(...)
export const schema = builder.buildSchema()
export default builder
```

## Usage Examples

### Custom Build Script

```typescript
// scripts/generate-schema.ts
import { generateSDL } from "@effect-gql/cli"
import { builder } from "../src/schema"
import { writeFileSync } from "fs"

const sdl = generateSDL(builder.buildSchema())
writeFileSync("schema.graphql", sdl)
console.log("Generated schema.graphql")
```

### Schema Validation

```typescript
import { loadSchema } from "@effect-gql/cli"
import { Effect } from "effect"
import { validateSchema } from "graphql"

const program = Effect.gen(function* () {
  const schema = yield* loadSchema("./src/schema.ts")
  const errors = validateSchema(schema)
  
  if (errors.length > 0) {
    console.error("Schema validation errors:", errors)
    process.exit(1)
  }
  
  console.log("Schema is valid!")
})

Effect.runPromise(program)
```

### Comparing Schemas

```typescript
import { generateSDLFromModule } from "@effect-gql/cli"
import { Effect } from "effect"
import { readFileSync } from "fs"

const program = Effect.gen(function* () {
  const currentSDL = yield* generateSDLFromModule("./src/schema.ts")
  const committedSDL = readFileSync("schema.graphql", "utf-8")
  
  if (currentSDL !== committedSDL) {
    console.error("Schema has changed! Run 'effect-gql generate-schema' to update.")
    process.exit(1)
  }
  
  console.log("Schema is up to date.")
})

Effect.runPromise(program)
```
